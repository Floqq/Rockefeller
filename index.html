<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Rockefeller by Floqq</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Rockefeller</h1>
        <p>Library for dealing with money and currency conversion in Python</p>
        <p class="view"><a href="https://github.com/Floqq/Rockefeller">View the Project on GitHub <small>Floqq/Rockefeller</small></a></p>
        <ul>
          <li><a href="https://github.com/Floqq/Rockefeller/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/Floqq/Rockefeller/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/Floqq/Rockefeller">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>Rockefeller</h1>

<p>Library for dealing with money and currency conversion in Python. It provides
tools for <strong>storing</strong> currencies and exchange rates, <strong>converting</strong> from one
currency to another and <strong>fetching</strong> exchange rates from different services.</p>

<h2>Tutorial</h2>

<h3>Working with currencies</h3>

<p>Currencies are represented by the <code>Currency</code> class.</p>

<div class="highlight"><pre><span class="kn">import</span> <span class="nn">rockefeller</span>

<span class="n">usd</span> <span class="o">=</span> <span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'United States Dollar'</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s">'USD'</span><span class="p">,</span>
                            <span class="n">numeric</span><span class="o">=</span><span class="s">'840'</span><span class="p">,</span> <span class="n">symbol</span><span class="o">=</span><span class="s">'$'</span><span class="p">,</span> <span class="n">exponent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">str</span><span class="p">(</span><span class="n">usd</span><span class="p">)</span>
<span class="c"># =&gt; 'USD'</span>
</pre></div>

<p>If you want to globally store a currency in your program, you first need to
<strong>support it</strong>.</p>

<div class="highlight"><pre><span class="kn">import</span> <span class="nn">rockefeller</span>

<span class="n">usd</span> <span class="o">=</span> <span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'United States Dollar'</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s">'USD'</span><span class="p">,</span>
                            <span class="n">numeric</span><span class="o">=</span><span class="s">'840'</span><span class="p">,</span> <span class="n">symbol</span><span class="o">=</span><span class="s">'$'</span><span class="p">,</span> <span class="n">exponent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c"># You only have access to the currency stored in ``usd`` variable</span>
<span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="o">.</span><span class="n">USD</span>
<span class="c"># =&gt; None</span>

<span class="c"># Globally support the currency (See `setting currency store`)</span>
<span class="n">usd</span><span class="o">.</span><span class="n">support</span><span class="p">()</span>

<span class="c"># Now you can access it directly via the ``Currency`` class</span>
<span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="o">.</span><span class="n">USD</span>
<span class="c"># =&gt; Currency(code='USD', ...)</span>
<span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'USD'</span><span class="p">)</span>
<span class="c"># =&gt; Currency(code='USD', ...)</span>

<span class="n">usd</span> <span class="o">==</span> <span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="o">.</span><span class="n">USD</span>
<span class="c"># =&gt; True</span>

<span class="n">usd</span> <span class="ow">is</span> <span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="o">.</span><span class="n">USD</span>
<span class="c"># =&gt; False</span>
</pre></div>

<h3>Exchange rates</h3>

<p>Exchange rates between currencies are represented through the <code>ExchangeRate</code>
class but you can <strong>add</strong> and <strong>retrieve</strong> exchange rates directly like this:</p>

<div class="highlight"><pre><span class="kn">import</span> <span class="nn">rockefeller</span>

<span class="n">eur</span> <span class="o">=</span> <span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Euro'</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s">'EUR'</span><span class="p">,</span> <span class="n">numeric</span><span class="o">=</span><span class="s">'978'</span><span class="p">,</span>
                            <span class="n">symbol</span><span class="o">=</span><span class="s">u'â‚¬'</span><span class="p">,</span> <span class="n">exponent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">clp</span> <span class="o">=</span> <span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Chilean Peso'</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s">'CLP'</span><span class="p">,</span> <span class="n">numeric</span><span class="o">=</span><span class="s">'152'</span><span class="p">,</span>
                            <span class="n">symbol</span><span class="o">=</span><span class="s">'$'</span><span class="p">,</span> <span class="n">exponent</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="n">rockefeller</span><span class="o">.</span><span class="n">get_exchange_rate</span><span class="p">(</span><span class="n">eur</span><span class="p">,</span> <span class="n">clp</span><span class="p">)</span>
<span class="c"># =&gt; None</span>

<span class="c"># Store exchange rate for EUR =&gt; CLP</span>
<span class="n">rockefeller</span><span class="o">.</span><span class="n">add_exchange_rate</span><span class="p">(</span><span class="n">eur</span><span class="p">,</span> <span class="n">clp</span><span class="p">,</span> <span class="mf">604.10</span><span class="p">)</span>

<span class="n">rockefeller</span><span class="o">.</span><span class="n">get_exchange_rate</span><span class="p">(</span><span class="n">eur</span><span class="p">,</span> <span class="n">clp</span><span class="p">)</span>
<span class="c"># =&gt; Decimal('604.10')</span>

<span class="c"># You can also get the inverse even if not explicitly defined</span>
<span class="n">rockefeller</span><span class="o">.</span><span class="n">get_exchange_rate</span><span class="p">(</span><span class="n">clp</span><span class="p">,</span> <span class="n">eur</span><span class="p">)</span>
<span class="c"># =&gt; Decimal('0.001655355073663300778016884622')</span>

<span class="n">rate</span> <span class="o">==</span> <span class="mf">604.10</span>
<span class="c"># =&gt; False (604.10 doesn't have an exact float representation)</span>

<span class="nb">float</span><span class="p">(</span><span class="n">rate</span><span class="p">)</span> <span class="o">==</span> <span class="mf">604.10</span>
<span class="c"># =&gt; True</span>
</pre></div>

<h3>Money</h3>

<p>For working with currencies and amounts of it there's the convenient <code>Money</code>
class.</p>

<div class="highlight"><pre>
<span class="n">money</span> <span class="o">=</span> <span class="n">rockefeller</span><span class="o">.</span><span class="n">Money</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="mf">100.235</span><span class="p">,</span> <span class="n">currency</span><span class="o">=</span><span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="o">.</span><span class="n">USD</span><span class="p">)</span>
</pre></div>

<h4>Money arithmetic</h4>

<h4>Sum</h4>

<div class="highlight"><pre><span class="p">(</span><span class="n">rockefeller</span><span class="o">.</span><span class="n">Money</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="o">.</span><span class="n">USD</span><span class="p">)</span> <span class="o">+</span> 
    <span class="n">rockefeller</span><span class="o">.</span><span class="n">Money</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="o">.</span><span class="n">USD</span><span class="p">))</span>
<span class="c"># =&gt; Money(200, rockefeller.Currency.USD)</span>
</pre></div>

<h4>Subtraction</h4>

<div class="highlight"><pre><span class="p">(</span><span class="n">rockefeller</span><span class="o">.</span><span class="n">Money</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="o">.</span><span class="n">USD</span><span class="p">)</span> <span class="o">-</span> 
    <span class="n">rockefeller</span><span class="o">.</span><span class="n">Money</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="o">.</span><span class="n">USD</span><span class="p">))</span>
<span class="c"># =&gt; Money(-20, rockefeller.Currency.USD)</span>
</pre></div>

<h4>Subtraction (saturating)</h4>

<div class="highlight"><pre><span class="n">rockefeller</span><span class="o">.</span><span class="n">Money</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="o">.</span><span class="n">USD</span><span class="p">)</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span>
    <span class="n">rockefeller</span><span class="o">.</span><span class="n">Money</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="o">.</span><span class="n">USD</span><span class="p">))</span>
<span class="c"># =&gt; Money(0, rockefeller.Currency.USD)</span>
</pre></div>

<h4>Multiplication</h4>

<div class="highlight"><pre><span class="p">(</span><span class="n">rockefeller</span><span class="o">.</span><span class="n">Money</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="o">.</span><span class="n">USD</span><span class="p">)</span> <span class="o">*</span> 
    <span class="n">rockefeller</span><span class="o">.</span><span class="n">Money</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="o">.</span><span class="n">USD</span><span class="p">))</span>
<span class="c"># =&gt; Money(100, rockefeller.Currency.USD)</span>
</pre></div>

<h4>Division</h4>

<div class="highlight"><pre><span class="p">(</span><span class="n">rockefeller</span><span class="o">.</span><span class="n">Money</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="o">.</span><span class="n">USD</span><span class="p">)</span> <span class="o">/</span> 
    <span class="n">rockefeller</span><span class="o">.</span><span class="n">Money</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="o">.</span><span class="n">USD</span><span class="p">))</span>
<span class="c"># =&gt; Money(1, rockefeller.Currency.USD)</span>
</pre></div>

<h4>Float rounding using currency's exponent</h4>

<div class="highlight"><pre><span class="n">usd_money</span> <span class="o">=</span> <span class="n">rockefeller</span><span class="o">.</span><span class="n">Money</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="mf">100.235</span><span class="p">,</span> <span class="n">currency</span><span class="o">=</span><span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="o">.</span><span class="n">USD</span><span class="p">)</span>
<span class="n">clp_money</span> <span class="o">=</span> <span class="n">rockefeller</span><span class="o">.</span><span class="n">Money</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="mf">60551.984324</span><span class="p">,</span> <span class="n">currency</span><span class="o">=</span><span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="o">.</span><span class="n">CLP</span><span class="p">)</span>

<span class="n">usd_money</span><span class="o">.</span><span class="n">amount</span>
<span class="c"># =&gt; Decimal('100.235')</span>

<span class="n">clp_money</span><span class="o">.</span><span class="n">amount</span>
<span class="c"># =&gt; Decimal('60551.984324')</span>

<span class="nb">float</span><span class="p">(</span><span class="n">usd_money</span><span class="p">)</span>
<span class="c"># =&gt; 100.24</span>

<span class="nb">float</span><span class="p">(</span><span class="n">clp_money</span><span class="p">)</span>
<span class="c"># = &gt; 60552</span>
</pre></div>

<h4>String representation</h4>

<div class="highlight"><pre><span class="s">u'$100.24'</span> <span class="o">==</span> <span class="nb">unicode</span><span class="p">(</span><span class="n">usd_money</span><span class="p">)</span>
<span class="c"># =&gt; True</span>
</pre></div>

<h4>Equality</h4>

<div class="highlight"><pre><span class="n">usd_money</span> <span class="o">==</span> <span class="n">rockefeller</span><span class="o">.</span><span class="n">Money</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="mf">100.235</span><span class="p">,</span> <span class="n">currency</span><span class="o">=</span><span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="o">.</span><span class="n">USD</span><span class="p">)</span>
<span class="c"># =&gt; True</span>
</pre></div>

<h4>Conversion between currencies</h4>

<div class="highlight"><pre><span class="kn">import</span> <span class="nn">rockefeller</span>

<span class="n">usd</span> <span class="o">=</span> <span class="n">rockefeller</span><span class="o">.</span><span class="n">Money</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">currency</span><span class="o">=</span><span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="o">.</span><span class="n">USD</span><span class="p">)</span>
<span class="n">eur</span> <span class="o">=</span> <span class="n">rockefeller</span><span class="o">.</span><span class="n">Money</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="mi">78</span><span class="p">,</span> <span class="n">currency</span><span class="o">=</span><span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="o">.</span><span class="n">EUR</span><span class="p">)</span>

<span class="n">rockefeller</span><span class="o">.</span><span class="n">add_exchange_rate</span><span class="p">(</span><span class="n">usd</span><span class="p">,</span> <span class="n">eur</span><span class="p">,</span> <span class="o">.</span><span class="mi">78</span><span class="p">)</span>

<span class="n">usd</span><span class="o">.</span><span class="n">exchange_to</span><span class="p">(</span><span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="o">.</span><span class="n">EUR</span><span class="p">)</span>
<span class="c"># =&gt; Money(78, rockefeller.Currency.EUR)</span>

<span class="n">eur</span><span class="o">.</span><span class="n">exchange_to</span><span class="p">(</span><span class="n">rockefeller</span><span class="o">.</span><span class="n">Currency</span><span class="o">.</span><span class="n">USD</span><span class="p">)</span>
<span class="c"># =&gt; Money(100, rockefeller.Currency.USD)</span>
</pre></div>

<h4>Conversion between currencies using indirection</h4>

<h2>Installation</h2>

<p>The library has 0 dependencies outside of the standard library. In order to
install it just download the source and run:</p>

<pre><code>python setup.py install
</code></pre>

<p>Or you can install it directly from git using pip:</p>

<pre><code>pip install -e git+http://github.com/Floqq/Rockefeller.git#egg=Rockefeller
</code></pre>

<h2>Running tests</h2>

<pre><code>python setup.py test
</code></pre>
      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/Floqq">Floqq</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>